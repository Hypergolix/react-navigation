{"version":3,"sources":["extractPathFromURL.tsx"],"names":["escapeStringRegexp","extractPathFromURL","prefixes","url","prefix","protocol","match","host","replace","RegExp","prefixRegex","split","map","it","join","normalizedURL","test","undefined"],"mappings":"AAAA,OAAOA,kBAAP,MAA+B,sBAA/B;AAEA,eAAe,SAASC,kBAAT,CAA4BC,QAA5B,EAAgDC,GAAhD,EAA6D;AAC1E,OAAK,MAAMC,MAAX,IAAqBF,QAArB,EAA+B;AAAA;;AAC7B,UAAMG,QAAQ,sCAAGD,MAAM,CAACE,KAAP,CAAa,SAAb,CAAH,kDAAG,cAA0B,CAA1B,CAAH,2DAAmC,EAAjD;AACA,UAAMC,IAAI,GAAGH,MAAM,CAChBI,OADU,CACF,IAAIC,MAAJ,CAAY,IAAGT,kBAAkB,CAACK,QAAD,CAAW,EAA5C,CADE,EAC8C,EAD9C,EAEVG,OAFU,CAEF,MAFE,EAEM,GAFN,EAEW;AAFX,KAGVA,OAHU,CAGF,KAHE,EAGK,EAHL,CAAb,CAF6B,CAKN;;AAEvB,UAAME,WAAW,GAAG,IAAID,MAAJ,CACjB,IAAGT,kBAAkB,CAACK,QAAD,CAAW,OAAME,IAAI,CACxCI,KADoC,CAC9B,GAD8B,EAEpCC,GAFoC,CAE/BC,EAAD,IAASA,EAAE,KAAK,GAAP,GAAa,OAAb,GAAuBb,kBAAkB,CAACa,EAAD,CAFlB,EAGpCC,IAHoC,CAG/B,KAH+B,CAGxB,EAJG,CAApB;AAOA,UAAMC,aAAa,GAAGZ,GAAG,CAACK,OAAJ,CAAY,MAAZ,EAAoB,GAApB,CAAtB;;AAEA,QAAIE,WAAW,CAACM,IAAZ,CAAiBD,aAAjB,CAAJ,EAAqC;AACnC,aAAOA,aAAa,CAACP,OAAd,CAAsBE,WAAtB,EAAmC,EAAnC,CAAP;AACD;AACF;;AAED,SAAOO,SAAP;AACD","sourcesContent":["import escapeStringRegexp from 'escape-string-regexp';\r\n\r\nexport default function extractPathFromURL(prefixes: string[], url: string) {\r\n  for (const prefix of prefixes) {\r\n    const protocol = prefix.match(/^[^:]+:/)?.[0] ?? '';\r\n    const host = prefix\r\n      .replace(new RegExp(`^${escapeStringRegexp(protocol)}`), '')\r\n      .replace(/\\/+/g, '/') // Replace multiple slash (//) with single ones\r\n      .replace(/^\\//, ''); // Remove extra leading slash\r\n\r\n    const prefixRegex = new RegExp(\r\n      `^${escapeStringRegexp(protocol)}(/)*${host\r\n        .split('.')\r\n        .map((it) => (it === '*' ? '[^/]+' : escapeStringRegexp(it)))\r\n        .join('\\\\.')}`\r\n    );\r\n\r\n    const normalizedURL = url.replace(/\\/+/g, '/');\r\n\r\n    if (prefixRegex.test(normalizedURL)) {\r\n      return normalizedURL.replace(prefixRegex, '');\r\n    }\r\n  }\r\n\r\n  return undefined;\r\n}\r\n"]}